#include <sys.pi>
#include <console.pi>
c = new console(2 of 2);
s = new sys(2 of 2);

s[1]<<^CountArgs;
s[1]>>argc;
c[1]<<^PutString;
c[1]<<"Number of args";
c[1]<<^PutInt;
c[1]<<argc;
local PrintArgs(Int i, $console(2 of 1 pure,2) c, $sys(1 of 1 pure,2) s)
( s[2]<<^GetArg<<i;
  s[2]>>
  {^Some: s[2]>>a;
          c[1]<<^PutString<<a;
          PrintArgs(i+1,c,s);
   ^None: s[2]<<^End;
          c[1]<<^End;
  }
)
PrintArgs(0,c,s);
